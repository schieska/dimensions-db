{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://extrabold.tools/schemas/dist-item.schema.json",
  "title": "Distribution Item",
  "type": "object",
  "additionalProperties": false,
  "required": ["id", "type", "name", "brand", "inner_size_mm"],
  "properties": {
    "id": {"type": "string", "minLength": 2, "maxLength": 120},
    "type": {"type": "string"},
    "origin": {"anyOf": [{"type": "string"}, {"type": "null"}]},
    "name": {"type": "string"},
    "brand": {"type": "string"},
    "description": {"anyOf": [{"type": "null"}, {"type": "string", "maxLength": 500}]},
    "translations": {"anyOf": [{"type": "null"}, {"$ref": "common.schema.json#/$defs/i18nMap"}]},
    "inner_size_mm": {"description": "Inner dimensions in millimeters (source of truth).", "anyOf": [{"$ref": "common.schema.json#/$defs/size"}, {"type": "null"}]},
    "inner_size_in": {"description": "Inner dimensions in inches (generated from mm).", "anyOf": [{"$ref": "common.schema.json#/$defs/size"}, {"type": "null"}]},
    "outer_size_mm": {"description": "Outer dimensions in millimeters.", "anyOf": [{"$ref": "common.schema.json#/$defs/size"}, {"type": "null"}]},
    "outer_size_in": {"description": "Outer dimensions in inches (generated from mm).", "anyOf": [{"$ref": "common.schema.json#/$defs/size"}, {"type": "null"}]},
    "visibility": {"anyOf": [{"type": "null"}, {"type": "array", "items": {"type": "string"}, "uniqueItems": true}]},
    "materials": {"anyOf": [{"type": "null"}, {"type": "array", "items": {"type": "string"}}]},
    "features": {"anyOf": [{"type": "null"}, {"type": "array", "items": {"type": "string"}}]},
    "parts": {"description": "Parent -> children relation with quantity.", "anyOf": [{"type": "null"}, {"type": "array", "items": {"type": "object", "required": ["ref", "qty"], "properties": {"ref": {"type": "string"}, "qty": {"type": "integer", "minimum": 1}}}}]},
    "sources": {"anyOf": [{"type": "null"}, {"type": "array", "minItems": 1, "items": {"type": "object", "additionalProperties": false, "required": ["kind"], "properties": {"kind": {"type": "string"}, "url": {"type": "string", "format": "uri"}, "description": {"type": "string"}, "regions": {"type": "array", "items": {"type": "string"}}, "langs": {"type": "array", "items": {"type": "string"}}, "note": {"type": "string"}}}}]},
    "measurements": {"anyOf": [{"type": "null"}, {"type": "array", "minItems": 1, "items": {"type": "object", "additionalProperties": false, "required": ["by", "method", "tool", "date"], "properties": {"by": {"type": "string"}, "type": {"type": "string"}, "method": {"type": "string"}, "tool": {"type": "string"}, "protocol": {"anyOf": [{"type": "string"}, {"type": "null"}]}, "date": {"type": "string"}, "notes": {"anyOf": [{"type": "string"}, {"type": "null"}]}}}}]},
    "tolerance_mm": {"anyOf": [{"type": "null"}, {"$ref": "common.schema.json#/$defs/mmTol3"}]},
    "referenced_by_count": {"anyOf": [{"type": "integer", "minimum": 0}, {"type": "null"}]},
    "added_by": {"anyOf": [{"type": "string"}, {"type": "null"}]},
    "status": {"anyOf": [{"type": "string"}, {"type": "null"}]},
    "accuracy": {"anyOf": [{"type": "string"}, {"type": "null"}]},
    "identifiers": {"anyOf": [{"type": "object"}, {"type": "null"}]},
    "variant_of": {"anyOf": [{"type": "string"}, {"type": "null"}]},
    "variant": {"anyOf": [{"type": "null"}, {"type": "object", "additionalProperties": false, "properties": {"color": {"type": "string"}, "region": {"type": "string"}, "revision": {"type": "string"}}}]},
    "images": {"anyOf": [{"type": "null"}, {"type": "array", "items": {"type": "object", "additionalProperties": false, "required": ["kind", "url"], "properties": {"kind": {"type": "string"}, "url": {"type": "string", "format": "uri"}, "note": {"type": "string"}}}}]},
    "deprecated": {"anyOf": [{"type": "boolean"}, {"type": "null"}]},
    "replaced_by": {"anyOf": [{"type": "string"}, {"type": "null"}]},
    "updated_at": {"anyOf": [{"$ref": "common.schema.json#/$defs/isoDate"}, {"type": "string", "format": "date-time"}, {"type": "null"}]}
  }
}
